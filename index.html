<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tablero de Control Docente</title>
    <!-- Fuentes y Librerías -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Hoja de Estilos Propia -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Elementos para loader y modal -->
    <div id="loader">
      <div class="spinner"></div>
    </div>
    <div id="modal-backdrop" class="hidden"></div>

    <header class="app-header">
      <div class="app-header__inner">
        <div class="brand-area">
          <span class="brand-pill">ITSon</span>
          <div>
            <h1>
              <i data-lucide="layout-dashboard"></i> Tablero de Control Docente
            </h1>
            <p class="brand-description">
              Planifica, monitorea y comunica el trabajo académico en una
              interfaz unificada.
            </p>
          </div>
        </div>
        <div class="header-tools">
          <div class="user-meta hidden" id="headerUserMeta">
            <span id="headerUserName"></span>
            <span class="badge" id="headerUserRole"></span>
            <button id="logoutBtn" type="button">
              <i data-lucide="log-out"></i><span>Cerrar sesión</span>
            </button>
          </div>
        </div>
      </div>
      <div class="app-header__meta">
        <div class="meta-highlight">
          <i data-lucide="target"></i>
          <div>
            <span>Visión general</span>
            <p>Obtén indicadores clave en segundos y coordina a tu equipo con
              claridad.</p>
          </div>
        </div>
        <div class="meta-highlight">
          <i data-lucide="calendar-check"></i>
          <div>
            <span>Seguimiento de actividades</span>
            <p>Consulta avances, responsables y fechas límite desde un tablero
              flexible.</p>
          </div>
        </div>
        <div class="meta-highlight">
          <i data-lucide="file-spreadsheet"></i>
          <div>
            <span>Reportes listos</span>
            <p>Genera reportes por carrera y rol para respaldar decisiones
              académicas.</p>
          </div>
        </div>
      </div>
    </header>

    <main>
      <!-- Sección de Autenticación -->
      <section id="authSection">
        <div class="auth-layout">
          <div class="auth-hero">
            <span class="eyebrow">Gestión académica</span>
            <h2>Organiza el trabajo docente con claridad</h2>
            <p>
              Centraliza indicadores, actividades y seguimientos en un solo
              lugar.
            </p>
            <ul class="auth-highlights">
              <li>Visualiza el avance de las actividades en tiempo real.</li>
              <li>Coordina responsabilidades entre docentes y auxiliares.</li>
              <li>Genera reportes claros para la toma de decisiones.</li>
            </ul>
            <div class="auth-metrics">
              <div>
                <span class="metric-value">+120</span>
                <span class="metric-label">Actividades gestionadas</span>
              </div>
              <div>
                <span class="metric-value">8</span>
                <span class="metric-label">Programas académicos</span>
              </div>
              <div>
                <span class="metric-value">24/7</span>
                <span class="metric-label">Acceso disponible</span>
              </div>
            </div>
          </div>

          <div class="auth-panel">
            <div class="card" id="loginCard">
              <div class="card-header">
                <div>
                  <span class="eyebrow">Bienvenido</span>
                  <h2>Ingresa a tu panel</h2>
                </div>
                <i data-lucide="lock"></i>
              </div>
              <p>
                Accede con tu correo institucional
                <strong>@potros.itson.edu.mx</strong> y gestiona tus tareas sin
                complicaciones. Selecciona uno de los perfiles demo para explorar la plataforma.
              </p>
              <form id="loginForm">
                <div class="form-field">
                  <label for="userSelector">Selecciona un usuario demo</label>
                  <select id="userSelector" required>
                    <option value="" disabled selected>
                      Elige un perfil para iniciar sesión
                    </option>
                  </select>
                  <p class="form-help">
                    Los perfiles disponibles simulan los roles de administrador, docente y auxiliar.
                  </p>
                </div>
                <div class="form-actions">
                  <button class="primary" type="submit">
                    <i data-lucide="log-in"></i>
                    <span>Ingresar a la plataforma</span>
                  </button>
                </div>
              </form>
              <div class="alert error" id="loginError"></div>
            </div>
            <div class="auth-support">
              <div>
                <i data-lucide="headset"></i>
                <h3>¿Necesitas ayuda?</h3>
                <p>
                  Nuestro equipo académico puede orientarte con la migración de
                  datos o la incorporación de nuevos usuarios.
                </p>
              </div>
              <ul>
                <li><i data-lucide="mail"></i> soporte@itson.edu.mx</li>
                <li><i data-lucide="phone"></i> (644) 410 9000 ext. 125</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Dashboard Principal -->
      <section id="dashboard" class="hidden">
        <div class="dashboard-shell">
          <aside class="sidebar">
            <div class="user-card">
              <span class="user-badge">Sesión activa</span>
              <h3 id="sidebarName"></h3>
              <div class="meta-list">
                <span id="sidebarEmail"></span>
                <span id="sidebarCareer"></span>
              </div>
            </div>
            <nav>
              <h4>Secciones</h4>
              <ul id="navigation"></ul>
            </nav>
            <div class="sidebar-footer">
              <p>
                Mantente al día con tus actividades y comparte avances con tu
                coordinación.
              </p>
            </div>
          </aside>
          <section class="content-area">
            <div
              class="content-intro"
              id="dashboardIntro"
              data-nav-label="Panel de control"
              data-nav-roles="administrador,docente,auxiliar"
            >
              <div>
                <h2>Panel de control</h2>
                <p>
                  Revisa tus indicadores, tareas y reportes de manera visual y
                  organizada.
                </p>
              </div>
              <button class="ghost" type="button" id="printReport">
                <i data-lucide="printer"></i> Imprimir reporte
              </button>
            </div>

            <!-- Vistas de Admin -->
            <div id="adminView" class="hidden">
              <div
                class="overview-grid"
                id="dashboardHighlights"
                data-nav-label="Resumen"
                data-nav-roles="administrador"
              >
                <article class="summary-card">
                  <i data-lucide="users"></i>
                  <div>
                    <h3>Usuarios por carrera</h3>
                    <p>Identifica la distribución y crecimiento de docentes.</p>
                  </div>
                </article>
                <article class="summary-card">
                  <i data-lucide="check-circle"></i>
                  <div>
                    <h3>Estado de actividades</h3>
                    <p>Evalúa el progreso y detecta tareas pendientes.</p>
                  </div>
                </article>
                <article class="summary-card">
                  <i data-lucide="upload-cloud"></i>
                  <div>
                    <h3>Importación inteligente</h3>
                    <p>Integra nuevos docentes con plantillas precargadas.</p>
                  </div>
                </article>
              </div>

              <div
                class="card"
                id="generalReportCard"
                data-nav-label="Reporte general"
                data-nav-roles="administrador"
              >
                <div class="card-title">
                  <div>
                    <h2>Reporte General</h2>
                    <p class="card-subtitle">
                      Analiza de forma visual la actividad del departamento.
                    </p>
                  </div>
                  <div class="card-actions">
                    <button class="ghost" type="button" id="refreshDashboard">
                      <i data-lucide="refresh-cw"></i> Actualizar
                    </button>
                  </div>
                </div>
                <div class="chart-grid">
                  <div class="chart-card">
                    <header>
                      <h4>Usuarios por Carrera</h4>
                    </header>
                    <canvas id="usersChart"></canvas>
                  </div>
                  <div class="chart-card">
                    <header>
                      <h4>Estado de Actividades</h4>
                    </header>
                    <canvas id="activitiesChart"></canvas>
                  </div>
                </div>
              </div>

              <div
                class="card"
                id="userManagementCard"
                data-nav-label="Gestión de usuarios"
                data-nav-roles="administrador"
              >
                <div class="card-title">
                  <div>
                    <h2>Gestión de usuarios</h2>
                    <p class="card-subtitle">
                      Consulta, importa y gestiona el acceso a la plataforma.
                    </p>
                  </div>
                </div>
                <div id="admin-user-management">
                  <div class="import-toolbar">
                    <button class="primary" type="button" id="importTeachersBtn">
                      <i data-lucide="file-input"></i>
                      <span>Importar docentes de Ing. en Software</span>
                    </button>
                    <div id="importTeachersAlert"></div>
                  </div>
                  <div id="inviteAlert"></div>
                  <div id="userTableContainer" class="table-responsive"></div>
                </div>
              </div>

              <div
                class="card"
                id="activityManagementCard"
                data-nav-label="Gestión de actividades"
                data-nav-roles="administrador"
              >
                <div class="card-title">
                  <div>
                    <h2>Gestión de Actividades</h2>
                    <p class="card-subtitle">
                      Registra tareas clave y da seguimiento al avance del
                      equipo.
                    </p>
                  </div>
                </div>
                <form id="adminActivityForm">
                  <div class="grid activity-form-grid">
                    <div class="form-field">
                      <label for="activityTitle">Título de la actividad</label>
                      <input
                        id="activityTitle"
                        name="title"
                        type="text"
                        required
                        placeholder="Ej. Seguimiento de planeaciones"
                      />
                    </div>
                    <div class="form-field">
                      <label for="activityDueDate">Fecha límite</label>
                      <input
                        id="activityDueDate"
                        name="dueDate"
                        type="date"
                        required
                      />
                    </div>
                    <div class="form-field" style="grid-column: 1 / -1">
                      <label for="activityDescription">Descripción</label>
                      <textarea
                        id="activityDescription"
                        name="description"
                        rows="3"
                        placeholder="Describe el objetivo y entregables de la actividad"
                      ></textarea>
                    </div>
                    <div class="form-field">
                      <label for="activityCareer">Carrera</label>
                      <select id="activityCareer" name="career" required>
                        <option value="global" selected>
                          General (todas las carreras)
                        </option>
                        <option value="software">Ing. en Software</option>
                        <option value="manufactura">Ing. en Manufactura</option>
                        <option value="mecatronica">Ing. en Mecatrónica</option>
                      </select>
                    </div>
                    <div class="form-field">
                      <label for="activityRole">Responsable</label>
                      <select id="activityRole" name="responsibleRole" required>
                        <option value="docente">Docente</option>
                        <option value="auxiliar">Profesor auxiliar</option>
                        <option value="administrador">Administrador</option>
                      </select>
                    </div>
                    <div class="form-field">
                      <label for="activityEmail">Correo del responsable (opcional)</label>
                      <input
                        id="activityEmail"
                        name="responsibleEmail"
                        type="email"
                        placeholder="persona@potros.itson.edu.mx"
                      />
                    </div>
                  </div>
                  <button class="primary" type="submit">
                    <i data-lucide="plus"></i>
                    <span>Registrar actividad</span>
                  </button>
                </form>
                <div id="adminActivityAlert"></div>
                <div id="adminActivityList" class="activity-table"></div>
              </div>
            </div>

            <!-- Vistas de Docente -->
            <div id="docenteView" class="hidden">
              <div
                class="card"
                id="teacherActivitiesCard"
                data-nav-label="Mis actividades"
                data-nav-roles="docente"
              >
                <div class="card-title">
                  <div>
                    <h2>Mis Actividades</h2>
                    <p class="card-subtitle">
                      Consulta el estado de cada actividad asignada a tu
                      usuario.
                    </p>
                  </div>
                </div>
                <div id="teacherActivities" class="activity-cards"></div>
              </div>
            </div>

            <!-- Vistas de Auxiliar -->
            <div id="auxiliarView" class="hidden">
              <div
                class="card"
                id="auxiliarActivitiesCard"
                data-nav-label="Actividades de apoyo"
                data-nav-roles="auxiliar"
              >
                <div class="card-title">
                  <div>
                    <h2>Actividades de Apoyo</h2>
                    <p class="card-subtitle">
                      Actualiza el estado para mantener informado al equipo.
                    </p>
                  </div>
                </div>
                <div class="activity-legend">
                  <span class="status-badge status-pendiente">Pendiente</span>
                  <span class="status-badge status-en_progreso">En progreso</span>
                  <span class="status-badge status-completada">Completada</span>
                </div>
                <div id="auxiliarActivityAlert"></div>
                <div id="auxiliarActivityList" class="activity-cards"></div>
              </div>
            </div>
          </section>
        </div>
      </section>
    </main>

    <!-- Lógica de la Aplicación -->
    <script src="script.js" type="module"></script>
  </body>
</html>
