<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tablero de Control Docente</title>
    <!-- Fuentes y Librerías -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Hoja de Estilos Propia -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Elementos para loader y modal -->
    <div id="loader">
      <div class="spinner"></div>
    </div>
    <div id="modal-backdrop" class="hidden"></div>

    <header>
      <h1><i data-lucide="layout-dashboard"></i> Tablero de Control Docente</h1>
      <div class="user-meta hidden" id="headerUserMeta">
        <span id="headerUserName"></span>
        <span class="badge" id="headerUserRole"></span>
        <button id="logoutBtn" type="button">
          <i data-lucide="log-out"></i><span>Cerrar sesión</span>
        </button>
      </div>
    </header>

    <main>
      <!-- Sección de Autenticación -->
      <section id="authSection">
        <div class="auth-grid">
          <div class="auth-hero">
            <span class="eyebrow">Gestión académica</span>
            <h2>Organiza el trabajo docente con claridad</h2>
            <p>
              Centraliza indicadores, actividades y seguimientos en un solo
              lugar.
            </p>
            <ul class="auth-highlights">
              <li>Visualiza el avance de las actividades en tiempo real.</li>
              <li>Coordina responsabilidades entre docentes y auxiliares.</li>
              <li>Genera reportes claros para la toma de decisiones.</li>
            </ul>
          </div>

          <div class="card" id="loginCard">
            <h2>Bienvenido de nuevo</h2>
            <p>
              Accede con tu correo institucional
              <strong>@potros.itson.edu.mx</strong>.
            </p>
            <form>
              <button class="primary" type="button" id="googleLoginButton">
                <i data-lucide="log-in"></i>
                <span>Ingresar con Google</span>
              </button>
            </form>
            <div
              class="alert error"
              id="loginError"
              style="margin-top: 1rem"
            ></div>
          </div>
        </div>
      </section>

      <!-- Dashboard Principal -->
      <section id="dashboard" class="hidden">
        <div class="dashboard">
          <aside class="sidebar">
            <div class="user-card">
              <h3 id="sidebarName"></h3>
              <div class="meta-list">
                <span id="sidebarEmail"></span>
                <span id="sidebarCareer"></span>
              </div>
            </div>
            <nav><ul id="navigation"></ul></nav>
          </aside>
          <section class="content-area">
            <!-- Vistas de Admin -->
            <div id="adminView" class="hidden">
              <div class="card">
                <h2>Reporte General</h2>
                <div
                  class="grid"
                  style="grid-template-columns: 1fr 1fr; gap: 2rem"
                >
                  <div>
                    <h4>Usuarios por Carrera</h4>
                    <canvas id="usersChart"></canvas>
                  </div>
                  <div>
                    <h4>Estado de Actividades</h4>
                    <canvas id="activitiesChart"></canvas>
                  </div>
                </div>
              </div>
              <div class="card">
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 1.5rem;
                  "
                >
                  <h2>Gestión del Sistema</h2>
                  <button class="primary" id="printReport" type="button">
                    <i data-lucide="printer"></i> Imprimir Reporte
                  </button>
                </div>
                <!-- Formulario para Invitar Usuario -->
                <div id="admin-management-forms" style="margin-bottom: 2rem">
                  <form
                    id="inviteUserForm"
                    class="card"
                    style="padding: 1.5rem; background: #fafafa"
                  >
                    <h3 style="margin-top: 0">Invitar Nuevo Usuario</h3>
                    <div
                      class="grid"
                      style="grid-template-columns: 1fr 1fr; gap: 1rem"
                    >
                      <div class="form-field">
                        <label for="inviteName">Nombre Completo</label>
                        <input type="text" id="inviteName" required />
                      </div>
                      <div class="form-field">
                        <label for="inviteEmail">Correo Electrónico</label>
                        <input
                          type="email"
                          id="inviteEmail"
                          placeholder="usuario@potros.itson.edu.mx"
                          required
                        />
                      </div>
                      <div class="form-field">
                        <label for="inviteCareer">Carrera</label>
                        <select id="inviteCareer" required>
                          <option value="software">Ing. en Software</option>
                          <option value="manufactura">
                            Ing. en Manufactura
                          </option>
                          <option value="mecatronica">
                            Ing. en Mecatrónica
                          </option>
                        </select>
                      </div>
                      <div class="form-field">
                        <label for="inviteRole">Rol del Sistema</label>
                        <select id="inviteRole" required>
                          <option value="docente">Docente</option>
                          <option value="auxiliar">Profesor Auxiliar</option>
                          <option value="administrador">Administrador</option>
                        </select>
                      </div>
                    </div>
                    <button
                      class="primary"
                      type="submit"
                      style="margin-top: 1rem"
                    >
                      <i data-lucide="send"></i>
                      <span>Enviar Invitación</span>
                    </button>
                    <div id="inviteAlert"></div>
                  </form>
                </div>
                <!-- Tabla de Usuarios Registrados -->
                <div id="admin-user-management">
                  <h3>Usuarios Registrados</h3>
                  <div class="import-toolbar">
                    <button class="primary" type="button" id="importTeachersBtn">
                      <i data-lucide="file-input"></i>
                      <span>Importar docentes de Ing. en Software</span>
                    </button>
                    <div id="importTeachersAlert"></div>
                  </div>
                  <div id="userTableContainer"></div>
                </div>
              </div>
              <div class="card">
                <h2>Gestión de Actividades</h2>
                <p class="card-subtitle">
                  Registra tareas clave y da seguimiento al avance del equipo.
                </p>
                <form id="adminActivityForm">
                  <div class="grid activity-form-grid">
                    <div class="form-field">
                      <label for="activityTitle">Título de la actividad</label>
                      <input
                        id="activityTitle"
                        name="title"
                        type="text"
                        required
                        placeholder="Ej. Seguimiento de planeaciones"
                      />
                    </div>
                    <div class="form-field">
                      <label for="activityDueDate">Fecha límite</label>
                      <input
                        id="activityDueDate"
                        name="dueDate"
                        type="date"
                        required
                      />
                    </div>
                    <div class="form-field" style="grid-column: 1 / -1">
                      <label for="activityDescription">Descripción</label>
                      <textarea
                        id="activityDescription"
                        name="description"
                        rows="3"
                        placeholder="Describe el objetivo y entregables de la actividad"
                      ></textarea>
                    </div>
                    <div class="form-field">
                      <label for="activityRole">Responsable</label>
                      <select id="activityRole" name="responsibleRole" required>
                        <option value="docente">Docente</option>
                        <option value="auxiliar">Profesor auxiliar</option>
                        <option value="administrador">Administrador</option>
                      </select>
                    </div>
                    <div class="form-field">
                      <label for="activityEmail">Correo del responsable (opcional)</label>
                      <input
                        id="activityEmail"
                        name="responsibleEmail"
                        type="email"
                        placeholder="persona@potros.itson.edu.mx"
                      />
                    </div>
                  </div>
                  <button class="primary" type="submit">
                    <i data-lucide="plus"></i>
                    <span>Registrar actividad</span>
                  </button>
                </form>
                <div id="adminActivityAlert"></div>
                <div id="adminActivityList" class="activity-table"></div>
              </div>
            </div>

            <!-- Vistas de Docente -->
            <div id="docenteView" class="hidden">
              <div class="card">
                <h2>Mis Actividades</h2>
                <div id="teacherActivities" style="margin-top: 1.25rem"></div>
              </div>
            </div>

            <!-- Vistas de Auxiliar -->
            <div id="auxiliarView" class="hidden">
              <div class="card">
                <h2>Actividades de Apoyo</h2>
                <p class="card-subtitle">
                  Consulta tus tareas asignadas y actualiza su estado para
                  mantener informado al equipo.
                </p>
                <div class="activity-legend">
                  <span class="status-badge status-pendiente">Pendiente</span>
                  <span class="status-badge status-en_progreso">En progreso</span>
                  <span class="status-badge status-completada">Completada</span>
                </div>
                <div id="auxiliarActivityAlert"></div>
                <div
                  id="auxiliarActivityList"
                  class="activity-cards"
                  style="margin-top: 1.25rem"
                ></div>
              </div>
            </div>
          </section>
        </div>
      </section>
    </main>

    <!-- Lógica de la Aplicación -->
    <script src="script.js" type="module"></script>
  </body>
</html>
